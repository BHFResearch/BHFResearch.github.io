---
import { getCollection } from 'astro:content';
import MainLayout from '../layouts/MainLayout.astro';

const articles = await getCollection('articles');
const sorted = articles.sort((a,b)=> 
  new Date(b.data.pubDate) - new Date(a.data.pubDate)
);

const featured = sorted[0];
const latest = sorted.slice(1, 10);
---

<MainLayout title="Better Health Research">

<h1>Latest Health Articles</h1>

{articles.map(article => (
  <div class="card" style="margin-bottom:30px;">
    
    {article.data.image && (
      <img 
        src={article.data.image} 
        alt={article.data.title} 
        style="width:100%;max-height:300px;object-fit:cover;border-radius:10px;margin-bottom:10px;"
      />
    )}

    <h2>
      <a href={`/articles/${article.slug}/`}>
        {article.data.title}
      </a>
    </h2>

    <p style="color:#6b7280;">
      {article.data.description}
    </p>

  </div>
))}
<a href="/page/2/">Older Articles â†’</a>
</MainLayout>
