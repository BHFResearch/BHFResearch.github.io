import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const articles = await getCollection('articles');
  const categories = [...new Set(
    articles.map(a => a.data.category)
  )];

  return categories.map(category => ({
    params: { category }
  }));
}

const { category } = Astro.params;
const articles = await getCollection('articles');

const filtered = articles.filter(
  a => a.data.category === category
);
